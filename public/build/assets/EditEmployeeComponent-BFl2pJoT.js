import{r as c,a as C,w as b,q as N,c as j,o as u,m as f,e as g,l as E,g as V,T as v,f as e,p as x,t as r,F as S,j as z,n as B,k as M,h as O,v as T}from"./app-DRgljH5W.js";import{d as D}from"./index-C2iAraRI.js";const F={class:"relative bg-gradient-to-r p-2"},q={class:"flex justify-between items-center"},I={class:"flex items-center space-x-4"},L={class:"text-black text-sm mt-1"},U={class:"p-8 space-y-8 max-h-[65vh] overflow-y-auto custom-scrollbar"},G={class:"space-y-5"},P={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-3"},R={for:"name",class:"block text-sm font-medium text-gray-700"},A={class:"relative group"},H=["placeholder","onUpdate:modelValue"],J={class:"py-2"},K={class:"flex justify-end gap-4"},Q=["disabled"],W={class:"flex items-center space-x-2"},Z={__name:"EditEmployeeComponent",props:{isVisible:{type:Boolean,default:!1},employeeData:{type:Object,default:()=>({})}},emits:["close","submit"],setup(p,{emit:h}){const m=p,_=h,y=c(!1);c(!1);const l=c(!1),a=C({employeeId:null,name:"",lastName:"",email:"",grade_level:"",grade:"",division:"",position:"",organization:"",country_of_residence:"",base_station:"",unit_program:"",supervisors_matricule:null}),n=[{label:"First Name",key:"name",type:"text"},{label:"Last Name",key:"lastName",type:"text"},{label:"Email",key:"email",type:"email"},{label:"Grade Level",key:"grade_level",type:"text"},{label:"Grade",key:"grade",type:"text"},{label:"Division",key:"division",type:"text"},{label:"Position",key:"position",type:"text"},{label:"Organization",key:"organization",type:"text"},{label:"Country of Residence",key:"country_of_residence",type:"text"},{label:"Base Station",key:"base_station",type:"text"},{label:"Program / Unit",key:"unit_program",type:"textarea"},{label:"Supervisor RES Number",key:"supervisors_matricule",type:"number"}];b(()=>m.employeeData,s=>{s&&Object.keys(s).length>0&&Object.keys(a).forEach(t=>{a[t]=s[t]||(typeof a[t]=="number"?null:"")})},{deep:!0,immediate:!0}),b(()=>m.isVisible,s=>{s&&(y.value=!1,N(()=>{const t=document.querySelector("input:not([disabled])");t&&t.focus()}))});const d=()=>{y.value=!1,_("close")},k=async()=>{confirm("Are you sure you want to apply these changes?")&&(l.value=!0,axios.post("/staff/update",{...a}).then(async s=>{D.Inertia.reload(),alert("Operation successfully")}).catch(s=>{var t,o,i;alert(((o=(t=s.response)==null?void 0:t.data)==null?void 0:o.message)||s.message),console.error("Error saving :",((i=s.response)==null?void 0:i.data)||s.message)}).finally(()=>{l.value=!1}))};return(s,t)=>(u(),j(v,{name:"modal-overlay",appear:""},{default:f(()=>[p.isVisible?(u(),g("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-black/60 via-black/50 to-black/40 p-4",onClick:d},[V(v,{name:"modal-content",appear:""},{default:f(()=>[e("div",{class:"w-full max-w-xl p-4 bg-white rounded-lg shadow-2xl overflow-hidden transform transition-all duration-300 hover:shadow-3xl",onClick:t[0]||(t[0]=x(()=>{},["stop"]))},[e("div",F,[e("div",q,[e("div",I,[t[1]||(t[1]=e("div",{class:"w-12 h-12 bg-gray-800 rounded-full flex items-center justify-center backdrop-blur-sm"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("p",L,r(a.name)+" "+r(a.lastName),1)])]),e("button",{type:"button",onClick:d,class:"p-2 absolute top-0 right-2 text-2xl cursor-pointer"},t[2]||(t[2]=[e("i",{class:"uil uil-times"},null,-1)]))])]),e("form",{onSubmit:x(k,["prevent"]),class:"relative"},[e("div",U,[e("div",G,[e("div",P,[(u(),g(S,null,z(n,(o,i)=>e("div",{class:B(["space-y-2",i===n.length-1&&n.length%2!==0?"col-span-2":""])},[e("label",R,[M(r(o.label)+" ",1),t[3]||(t[3]=e("span",{class:"text-red-500"},"*",-1))]),e("div",A,[O(e("input",{id:"name",placeholder:o.label,"onUpdate:modelValue":w=>a[o.key]=w,type:"text",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 transition-all duration-200 disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200",required:""},null,8,H),[[T,a[o.key]]])])],2)),64))])])]),e("div",J,[e("div",K,[e("button",{type:"button",class:"px-6 cursor-pointer p-2 rounded-xl bg-white border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 focus:ring-4 focus:ring-gray-300/50",onClick:d}," Cancel "),e("button",{type:"submit",class:"px-8 p-2 cursor-pointer rounded-xl bg-green-500 text-white transition-all duration-200 transform hover:scale-105 hover:shadow-xl focus:ring-4 focus:ring-green-500/50 disabled:opacity-50 disabled:transform-none disabled:shadow-none",disabled:l.value},[e("div",W,[e("span",null,r(l.value?"processing...":"Save"),1)])],8,Q)])])],32)])]),_:1})])):E("",!0)]),_:1}))}};export{Z as default};
