import{r as c,e as g,o as y,f as l,k as b,p as r,t as _}from"./app-CrDucEyn.js";import{d as v}from"./index-CclwhqEs.js";const x={class:"modal-box"},h={class:"modal-action"},C=["disabled"],k={__name:"ImportFileComponent",setup(w){const a=c(null),s=c(!1),u=n=>{a.value=n.target.files[0],console.log("Fichier sélectionné :",a.value)},p=async()=>{if(!a.value){alert("Please select a file before uploading!");return}if(!confirm("Are you sure you want to upload this file?"))return;s.value=!0;const t=new FormData;t.append("file",a.value),window.axios.post("/allocations-file",t,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{var o;v.Inertia.reload(),a.value=null,alert(((o=e==null?void 0:e.data)==null?void 0:o.message)||(e==null?void 0:e.message)),document.getElementById("my_modal_1").close()}).catch(e=>{var o,d,m;alert(((d=(o=e.response)==null?void 0:o.data)==null?void 0:d.message)||e.message),console.error("Error saving allocations:",((m=e.response)==null?void 0:m.data)||e.message)}).finally(()=>{s.value=!1})},f=()=>{document.getElementById("my_modal_1").showModal()},i=()=>{document.getElementById("my_modal_1").close()};return(n,t)=>(y(),g("div",null,[l("button",{class:"btn rounded-lg",onClick:f},t[0]||(t[0]=[l("i",{class:"uil uil-import"},null,-1),b(" Import ")])),l("dialog",{onClick:r(i,["self"]),id:"my_modal_1",class:"modal modal-bottom sm:modal-middle"},[l("div",x,[t[1]||(t[1]=l("h3",{class:"text-lg font-bold"},"Import File",-1)),t[2]||(t[2]=l("p",{class:"py-4"},"Select a file to import",-1)),l("form",{onSubmit:r(p,["prevent"]),class:"space-y-4"},[l("input",{type:"file",name:"file",onChange:u,class:"file-input file-input-bordered w-full",accept:".xls, .xlsx",required:""},null,32),l("div",h,[l("button",{type:"submit",class:"btn btn-primary",disabled:s.value},_(s.value?"Uploading...":"Upload"),9,C),l("button",{type:"button",onClick:i,class:"btn"},"Close")])],32)])])]))}};export{k as default};
