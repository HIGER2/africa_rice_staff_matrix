import{r as c,e as g,o as y,f as l,k as b,p as r,t as _}from"./app-DRgljH5W.js";import{d as v}from"./index-C2iAraRI.js";const h={class:"modal-box"},C={class:"modal-action"},w=["disabled"],k={__name:"ImportFileComponent",setup(x){const o=c(null),s=c(!1),u=n=>{o.value=n.target.files[0],console.log("Fichier sélectionné :",o.value)},f=async()=>{if(!o.value){alert("Please select a file before uploading!");return}if(!confirm("Are you sure you want to upload this file?"))return;s.value=!0;const t=new FormData;t.append("file",o.value),window.axios.post("/allocations-file",t,{headers:{"Content-Type":"multipart/form-data"}}).then(async e=>{var a;v.Inertia.reload(),alert(((a=e==null?void 0:e.data)==null?void 0:a.message)||(e==null?void 0:e.message)),document.getElementById("my_modal_1").close()}).catch(e=>{var a,d,m;alert(((d=(a=e.response)==null?void 0:a.data)==null?void 0:d.message)||e.message),console.error("Error saving allocations:",((m=e.response)==null?void 0:m.data)||e.message)}).finally(()=>{s.value=!1})},p=()=>{document.getElementById("my_modal_1").showModal()},i=()=>{document.getElementById("my_modal_1").close()};return(n,t)=>(y(),g("div",null,[l("button",{class:"btn rounded-lg",onClick:p},t[0]||(t[0]=[l("i",{class:"uil uil-import"},null,-1),b(" Import ")])),l("dialog",{onClick:r(i,["self"]),id:"my_modal_1",class:"modal modal-bottom sm:modal-middle"},[l("div",h,[t[1]||(t[1]=l("h3",{class:"text-lg font-bold"},"Import File",-1)),t[2]||(t[2]=l("p",{class:"py-4"},"Select a file to import",-1)),l("form",{onSubmit:r(f,["prevent"]),class:"space-y-4"},[l("input",{type:"file",name:"file",onChange:u,class:"file-input file-input-bordered w-full",required:""},null,32),l("div",C,[l("button",{type:"submit",class:"btn btn-primary",disabled:s.value},_(s.value?"Uploading...":"Upload"),9,w),l("button",{type:"button",onClick:i,class:"btn"},"Close")])],32)])])]))}};export{k as default};
